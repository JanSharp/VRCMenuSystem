
- [x] Show an effective lockstep loading screen, during which none of the pages are accessible, because we do not know the local player's permissions and many pages won't even work without lockstep being initialized
  - [x] Reuse it for imports
- [x] When missing permissions to see any page at all, show some info text in the UI
- [ ] Option to collapse the side panel by default, part of the menu configuration
- [ ] Popups
  - [ ] hide popups when showing loading page, do not close them... probably? Systems probably should have custom special handling for when a popup is open while an import gets started
  - [x] API to close a popup, no matter where it is in the stack (for example when losing permission to do what the popup is related to)
- [x] Open close key binds
  - [x] Hold tab on desktop, using screen space UI
    - [x] Surround the player's in a cube of invisible canvases to make interaction with the screen space UI possible (yes this is a hack I found by accident)
      - [ ] maybe move the dummy canvases further away so there isn't a 200 pixel dragging dead zone in VRChat
      - [ ] probably make it clamp rather than elastic, which would likely be better for desktop mousewheel scrolling
    - [ ] maybe make it double tap hold, to allow regular usage of holding tab to interact with world UIs. Or maybe the inverse of that, hold tab to open the menu, double tap tab and hold and the menu does not open
  - [x] In VR, right joystick (vertical look), matching what Sylan did simply for muscle memory as it is good enough... and like what else are we supposed to use
    - [x] Down Up
    - [x] Down Down
    - [x] Hold Down
    - [x] test in VR
    - [x] ignore joystick movement while pointing at a scroll view (use the on pointer enter/exit events)
- [x] Different types of positioning of the UI in VR
  - [x] In front - Appears in front of your face, moves with your avatar, does not rotate
    - [ ] Maybe adjustable positioning? Like distance from you head? I don't think so though, it should be positioned such that it is nicely readable and comfortably interactable, which I don't believe varies much. Or so I would hope
  - [x] Left hand
  - [x] Right hand
    - [ ] For hand attachment... adjustable relative positioning?
- [ ] Maybe UI sidebar position switching between the left and right side
- [ ] A close button...
  - Maybe by putting it at the top of the side bar?
  - Maybe at the bottom?
  - Maybe effectively floating outside of the main UI?
- [ ] look at rect 2d mask for scroll view masking
- [ ] the loading bar when disappearing seems to stick around for longer than it should, as it is still visible while the page is also already visible
- [ ] maybe don't make the manager a singleton, so multiple in world UIs could use the menu system
  - [ ] make the open and close key bind handling an option on the menu configuration, which puts a prefab of required scripts into that menu
  - [ ] have an attribute which makes a MenuManager field get auto populated via finding a manager in parent hierarchy (could even make a generic FindInParent attribute and make it part of the common package)
- [ ] menu open and close events for systems to listen to
- [ ] think about if and how the menu system can or should have support surrounding a help page
- [ ] think about a partially generated credits page, containing links and licenses for software used in a scene
- [ ] option for pages to not revert all prefab overrides when rebuilding the menu, to support custom pages which have references to outside of the menu. Even though that is discouraged and should be done using editor scripting to resolve such external references. But most people wouldn't do that so I have to support it, plus there is a case such as a teleports page with an image of the map and buttons placed upon that where it honestly makes sense to have references to outside of the menu, since that is legitimately specific to the current scene. Unlike other cases, since the intent is for the menu prefab to be put into multiple scenes and have it "just work" (within reason)
- [x] expose which page is the active page as part of an api
- [x] raise event when active page changes
- [ ] API to change active page
- [x] raise event when menu open state changes
- [x] switch showing and hiding of pages as well as the whole menu to disabling objects, removing all canvas groups (see the RP Menu repo for [ui-performance.md](https://github.com/JanSharp/VRCRPMenu/blob/main/ui-performance.md))
- [x] put each page into its own sub canvas, primarily to prevent the O(n * log(n)) scaling of building batches from becoming unreasonable
- [x] the loading progress bar shows full when saying \[1/2\], something is wrong
- [x] change all of the additional shader channels to remove normal and tangent when moving canvases to the screen space one
- [x] reduce raycast targets



# Things I would like input on

- Styling
  - The width of the lines
  - Are any lines missing or too much?
  - ~~The highlight color~~ Actually with the UI styling system that should theoretically be stupid easy to adjust later
  - The size of the buttons in the main UI
  - The size of the scroll bar
  - The size of the sidebar buttons (note the amount that there could - like up to 16)
  - The font size in relation to their containers
  - The darkness of the popup background
  - The transparency of the UI as a whole
    - [x] Make a toggle between opaque and transparent to help test this. Or a slider even
- Positioning
  - In front
    - It moving with your play space but not with you is the right move, right?
    - Should the rotation be normalized/projected as it is now or should it just match the head rotation no matter the tilt/yaw (whatever you call it)
  - On hand
    - (the way the right hand is setup currently) Close on the hand, like VRC's quick menu as well as Sylan's menu
    - (the way the left hand is setup currently) Further away, similar to it being in front, but attached to the hand rather than the "world" (actually your play space)
  - Should positioning be adjustable by users (see how you can adjust overlay windows)? Or is it possible to have a default that is good enough for everybody? It is a bit different to the quick menu and Sylan's menu as it is larger
- Key binds
  - Are thresholds good enough - do you accidentally open the menu, or do you try to open it and fail to do so?
    - how's that experience here compared to Sylan's?
  - Is hold down 1.5 seconds really necessary? (maybe ask Sylan about that too, hm)
- A close button...
  - Maybe by putting it at the top of the side bar?
  - Maybe at the bottom of the side bar?
  - Maybe effectively floating outside of the main UI?
  - Maybe none?
